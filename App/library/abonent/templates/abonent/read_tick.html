{% extends 'abonent/base.html' %}

{% block title %}
{{ title }}
{% endblock %}

{% block content %}
<h4 class="display-4" align="center">–ß–∏—Ç–∞—Ü—å–∫—ñ –±—ñ–ª–µ—Ç–∏</h4>
{% if message %}
{% if '–ù–µ–º–æ–∂–ª–∏–≤–æ' in message %}
<div class="alert alert-danger">{{ message }}</div>
{% else %}
<div class="alert alert-success">{{ message }}</div>
{% endif %}
{% endif %}
<label for="sort_by" style="padding-left: 59%;">–°–æ—Ä—Ç—É–≤–∞—Ç–∏ –ø–æ:</label>

<div class="row">
    <div class="col-md-5">
        <form method="get" action="{% url 'read-tick' %}">
            <div class="input-group mb-3">
                <button class="btn btn-outline-secondary" type="submit" id="button-addon1">üîç</button>
                <input type="text" class="form-control" placeholder="–ü–æ—à—É–∫" name="q">
            </div>
            <a href="{% url 'add-tick' %}">
                <button type="button" class="btn btn-primary">–î–æ–¥–∞—Ç–∏</button>
            </a>
        </form>
    </div>
    <div class="col-md-7" style="padding-left: 17%;">
        <form method="get" action="{% url 'read-tick' %}">
            <div class="input-group mb-3">
                <button class="btn btn-outline-secondary" type="submit">üëâ</button>
                <select name="sort_by" id="sort_by" class="form-select">
                    <option value="num">–ù–æ–º–µ—Ä</option>
                    <option value="name">–ü–Ü–ë</option>
                    <option value="date">–î–∞—Ç–∞ –Ω–∞—Ä–æ–¥–∂–µ–Ω–Ω—è</option>
                </select>
            </div>
            <label><input type="radio" name="sort_order" value="asc" checked> –ü–æ –∑—Ä–æ—Å—Ç–∞–Ω–Ω—é</label>
            <label style="padding-left: 10%;"><input type="radio" name="sort_order" value="desc"> –ü–æ —Å–ø–∞–¥–∞–Ω–Ω—é</label>
        </form>
    </div>
</div>

<br>
<div class="table-responsive">
    <table class="table table-bordered">
        <thead class="table-secondary">
        <tr>
            <th>–ù–æ–º–µ—Ä</th>
            <th>–ü–Ü–ë</th>
            <th>–ê–¥—Ä–µ—Å–∞</th>
            <th>–†–æ–±–æ—á–∏–π —Ç–µ–ª–µ—Ñ–æ–Ω</th>
            <th>–î–æ–º–∞—à–Ω—ñ–π —Ç–µ–ª–µ—Ñ–æ–Ω</th>
            <th>–î–∞—Ç–∞ –Ω–∞—Ä–æ–¥–∂–µ–Ω–Ω—è</th>
            <th>–ó–º—ñ–Ω–∏—Ç–∏</th>
            <th>–í–∏–¥–∞–ª–∏—Ç–∏</th>
        </tr>
        </thead>
        <tbody>
        {% for reader in readers %}
        <tr>
            <td style="width:15%">{{ reader.read_ticket_num }}</td>
            <td style="width:20%">{{ reader.PIB }}</td>
            <td style="width:17%">{{ reader.home_adress }}</td>
            <td style="width:16%">{{ reader.tel_work }}</td>
            <td style="width:15%">{{ reader.tel_home }}</td>
            <td style="width:17%">{{ reader.birth_date }}</td>
            <td>
                <form method="post" action="{% url 'change-tick' reader.read_ticket_num %}" class="form-1">
                    {% csrf_token %}
                    <button class="btn btn-success" type="submit">–ó–º—ñ–Ω–∏—Ç–∏</button>
                </form>
            </td>
            <td>
                <form method="post" action="{% url 'delete-tick' reader.read_ticket_num %}" class="form-1">
                    {% csrf_token %}
                    <input type="hidden" name="action" value="delete">
                    <button class="btn btn-danger" type="submit">X</button>
                </form>
            </td>
        </tr>
        {% endfor %}
        </tbody>
    </table>
</div>
{% endblock %}