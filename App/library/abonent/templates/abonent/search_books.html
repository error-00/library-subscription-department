{% extends 'abonent/base.html' %}
{% load static %}

{% block title %}
{{ title }}
{% endblock %}

{% block content %}
<h4 class="display-4" align="center">–ü–æ—à—É–∫ –∫–Ω–∏–≥</h4>
<label for="sort_by" style="padding-left: 59%;">–°–æ—Ä—Ç—É–≤–∞—Ç–∏ –ø–æ:</label>

<div class="row">
    <div class="col-md-5">
        <form method="get" action="{% url 'search-book' %}">
            <div class="input-group mb-3">
                <button class="btn btn-outline-secondary" type="submit" id="button-addon1">üîç</button>
                <input type="text" class="form-control" placeholder="–¢–∞—Ä–∞—Å –®–µ–≤—á–µ–Ω–∫–æ" name="q">
            </div>
        </form>
    </div>
    <div class="col-md-7" style="padding-left: 17%;">
        <form method="get" action="{% url 'search-book' %}">
            <div class="input-group mb-3">
                <button class="btn btn-outline-secondary" type="submit">üëâ</button>
                <select name="sort_by" id="sort_by" class="form-select">
                    <option value="name">–ù–∞–∑–≤–∞</option>
                    <option value="author">–ê–≤—Ç–æ—Ä</option>
                    <option value="city">–ú—ñ—Å—Ç–æ</option>
                    <option value="year">–†—ñ–∫ –≤–∏–¥–∞–Ω–Ω—è</option>
                    <option value="pages">–ö—ñ–ª—å–∫—ñ—Å—Ç—å —Å—Ç–æ—Ä—ñ–Ω–æ–∫</option>
                    <option value="cost">–í–∞—Ä—Ç—ñ—Å—Ç—å</option>
                    <option value="copies">–ö—ñ–ª—å–∫—ñ—Å—Ç—å –µ–∫–∑–µ–º–ø–ª—è—Ä—ñ–≤</option>
                </select>
            </div>
            <label><input type="radio" name="sort_order" value="asc" checked> –ü–æ –∑—Ä–æ—Å—Ç–∞–Ω–Ω—é</label>
            <label style="padding-left: 10%;"><input type="radio" name="sort_order" value="desc"> –ü–æ —Å–ø–∞–¥–∞–Ω–Ω—é</label>
        </form>
    </div>
</div>


<br>
<div class="table-responsive">
    <table class="table table-bordered">
        <thead class="table-secondary">
        <tr>
            <th>ISBN</th>
            <th>–ù–∞–∑–≤–∞</th>
            <th>–ê–≤—Ç–æ—Ä</th>
            <th>–ú—ñ—Å—Ç–æ –≤–∏–¥–∞–Ω–Ω—è</th>
            <th>–í–∏–¥–∞–≤–Ω–∏—Ü—Ç–≤–æ</th>
            <th>–†—ñ–∫ –≤–∏–¥–∞–Ω–Ω—è</th>
            <th>–ö—ñ–ª—å–∫—ñ—Å—Ç—å —Å—Ç–æ—Ä—ñ–Ω–æ–∫</th>
            <th>–í–∞—Ä—Ç—ñ—Å—Ç—å</th>
            <th>–ö—ñ–ª—å–∫—ñ—Å—Ç—å –µ–∫–∑–µ–º–ø–ª—è—Ä—ñ–≤</th>
        </tr>
        </thead>
        <tbody>
        {% for book in books %}
        <tr>
            <td style="width:15%">{{ book.ISBN }}</td>
            <td style="width:12%">{{ book.name }}</td>
            <td style="width:12%">
                {% for author in book.authors.all %}
                {{ author.first_name }} {{ author.last_name }}{% if not forloop.last %}, {% endif %}
                {% endfor %}
            </td>
            <td style="width:10%">{{ book.public_city }}</td>
            <td style="width:10%">{{ book.publisher_ID_publisher }}</td>
            <td style="width:12%">{{ book.year }}</td>
            <td style="width:10%">{{ book.page_num }}</td>
            <td style="width:10%">
                {% for copy in book.copies_set.all %}
                {{ copy.cost }}
                {% endfor %}
            </td>
            <td style="width:9%">{{ book.copies_num }}</td>
        </tr>
        {% endfor %}
        </tbody>
    </table>
</div>
{% endblock %}